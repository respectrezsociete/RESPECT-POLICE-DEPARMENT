<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>قسم شرطة RESPECT</title>
<style>
body { font-family: Arial, sans-serif; background-color: #121212; color: #f0f0f0; margin: 0; }
header { background-color: #1a1a1a; padding: 20px; text-align: center; font-size: 24px; font-weight: bold; }
.container { padding: 20px; }
input, select, button { padding: 10px; margin: 5px; border-radius: 5px; border: none; }
input, select { width: 200px; }
button { background-color: #0a84ff; color: white; cursor: pointer; }
button:hover { background-color: #0066cc; }
.hidden { display: none; }
.dashboard-section { margin-top: 20px; border: 1px solid #333; padding: 15px; border-radius: 10px; }
.map-container { height: 300px; margin-top: 20px; border: 1px solid #333; border-radius: 10px; background-color: #222; display: flex; align-items: center; justify-content: center; color: #888; }
table { width: 100%; border-collapse: collapse; margin-top: 10px; }
td, th { border: 1px solid #333; padding: 8px; text-align: center; }
th { background-color: #1a1a1a; }
</style>
</head>
<body>
<header>قسم شرطة RESPECT</header>
<div class="container">

<!-- تسجيل الدخول -->
<div id="login-section">
  <h2>تسجيل الدخول</h2>
  <input type="text" id="login-user" placeholder="اسم المستخدم"><br>
  <input type="password" id="login-pass" placeholder="كلمة المرور"><br>
  <button onclick="login()">تسجيل الدخول</button>
  <p id="login-msg" style="color:red;"></p>
</div>

<!-- لوحة التحكم -->
<div id="dashboard-section" class="hidden">
  <h2 id="welcome-msg">مرحبا</h2>

  <!-- إضافة مواطن / مجرم -->
  <div class="dashboard-section">
    <h3>إضافة مواطن / مجرم</h3>
    <input type="text" id="person-name" placeholder="الاسم الكامل"><br>
    <input type="text" id="person-id" placeholder="الرقم الوطني"><br>
    <input type="text" id="person-address" placeholder="العنوان"><br>
    <input type="text" id="person-gender" placeholder="الجنس"><br>
    <select id="person-type">
      <option value="مواطن">مواطن</option>
      <option value="مجرم">مجرم</option>
    </select><br>
    <input type="text" id="person-vehicle" placeholder="رقم لوحة السيارة (اختياري)"><br>
    <button onclick="addPerson()">إضافة</button>
  </div>

  <!-- جدول الأشخاص -->
  <div class="dashboard-section">
    <h3>قائمة الأشخاص</h3>
    <table id="persons-table">
      <tr><th>الاسم</th><th>الرقم الوطني</th><th>العنوان</th><th>الجنس</th><th>النوع</th><th>السيارة</th><th>الإجراءات</th></tr>
    </table>
  </div>

  <!-- الخريطة -->
  <div class="map-container" id="map-container">
    خريطة - نمط GTA5 (يمكن التكبير والتحريك لاحقًا)
  </div>

  <!-- إدارة الحسابات (XP / الإيقاف / الحظر) -->
  <div class="dashboard-section">
    <h3>إدارة المستخدمين</h3>
    <input type="text" id="manage-user" placeholder="اسم المستخدم"><br>
    <button onclick="suspendUser()">إيقاف مؤقت</button>
    <button onclick="banUser()">حظر</button>
    <input type="number" id="add-xp" placeholder="إضافة نقاط خبرة">
    <button onclick="addXP()">إضافة نقاط</button>
  </div>

  <!-- إنشاء حساب شرطي -->
  <div class="dashboard-section">
    <h3>إنشاء حساب شرطي</h3>
    <input type="text" id="new-officer-name" placeholder="الاسم الكامل"><br>
    <input type="text" id="new-officer-knia" placeholder="الكنية"><br>
    <input type="text" id="new-officer-user" placeholder="اسم المستخدم"><br>
    <input type="password" id="new-officer-pass" placeholder="كلمة المرور"><br>
    <select id="new-officer-rank">
      <option value="شرطي">شرطي</option>
      <option value="ضابط صف">ضابط صف</option>
      <option value="قائد">قائد</option>
    </select><br>
    <button onclick="createPoliceAccount()">إنشاء الحساب</button>
  </div>

  <!-- جدول حسابات الشرطة -->
  <div class="dashboard-section">
    <h3>حسابات الشرطة</h3>
    <table id="police-table">
      <tr><th>اسم المستخدم</th><th>الاسم</th><th>الكنية</th><th>الرتبة</th><th>نقاط الخبرة</th><th>الإجراءات</th></tr>
    </table>
  </div>
</div>

<script>
// المستخدمون الابتدائيون
let users = [{username:'dev', password:'206600911', rank:'قائد', xp:0}];
let policeUsers = JSON.parse(localStorage.getItem('policeUsers')) || users;
let persons = JSON.parse(localStorage.getItem('persons')) || [];

// تسجيل الدخول
function login(){
  let u = document.getElementById('login-user').value;
  let p = document.getElementById('login-pass').value;
  let user = policeUsers.find(x=>x.username===u && x.password===p);
  if(user){
    document.getElementById('login-section').classList.add('hidden');
    document.getElementById('dashboard-section').classList.remove('hidden');
    document.getElementById('welcome-msg').innerText = `مرحبًا ${user.username} - ${user.rank}`;
    renderPersons();
    renderPoliceUsers();
  } else {
    document.getElementById('login-msg').innerText='بيانات الدخول غير صحيحة';
  }
}

// وظائف الأشخاص
function addPerson(){
  let name = document.getElementById('person-name').value;
  let id = document.getElementById('person-id').value;
  let address = document.getElementById('person-address').value;
  let gender = document.getElementById('person-gender').value;
  let type = document.getElementById('person-type').value;
  let vehicle = document.getElementById('person-vehicle').value;
  persons.push({name,id,address,gender,type,vehicle});
  localStorage.setItem('persons',JSON.stringify(persons));
  renderPersons();
}

function renderPersons(){
  let table = document.getElementById('persons-table');
  table.innerHTML = '<tr><th>الاسم</th><th>الرقم الوطني</th><th>العنوان</th><th>الجنس</th><th>النوع</th><th>السيارة</th><th>الإجراءات</th></tr>';
  persons.forEach((p,i)=>{
    let row = table.insertRow();
    row.insertCell(0).innerText = p.name;
    row.insertCell(1).innerText = p.id;
    row.insertCell(2).innerText = p.address;
    row.insertCell(3).innerText = p.gender;
    row.insertCell(4).innerText = p.type;
    row.insertCell(5).innerText = p.vehicle;
    let actionsCell = row.insertCell(6);
    actionsCell.innerHTML = `<button onclick='removePerson(${i})'>حذف</button>`;
  });
}

function removePerson(i){
  persons.splice(i,1);
  localStorage.setItem('persons',JSON.stringify(persons));
  renderPersons();
}

// وظائف الشرطة
function createPoliceAccount() {
  let name = document.getElementById('new-officer-name').value;
  let knia = document.getElementById('new-officer-knia').value;
  let username = document.getElementById('new-officer-user').value;
  let password = document.getElementById('new-officer-pass').value;
  let rank = document.getElementById('new-officer-rank').value;

  if(!name || !knia || !username || !password){
    alert('الرجاء تعبئة جميع الحقول');
    return;
  }

  if(policeUsers.some(u=>u.username===username)){
    alert('اسم المستخدم موجود بالفعل');
    return;
  }

  policeUsers.push({username,password,name,knia,rank,xp:0});
  localStorage.setItem('policeUsers', JSON.stringify(policeUsers));
  alert(`تم إنشاء حساب شرطي بنجاح للموظف ${name}!`);
  renderPoliceUsers();

  document.getElementById('new-officer-name').value='';
  document.getElementById('new-officer-knia').value='';
  document.getElementById('new-officer-user').value='';
  document.getElementById('new-officer-pass').value='';
}

function renderPoliceUsers(){
  let table = document.getElementById('police-table');
  table.innerHTML = '<tr><th>اسم المستخدم</th><th>الاسم</th><th>الكنية</th><th>الرتبة</th><th>نقاط الخبرة</th><th>الإجراءات</th></tr>';
  policeUsers.forEach((u,i)=>{
    let row = table.insertRow();
    row.insertCell(0).innerText = u.username;
    row.insertCell(1).innerText = u.name;
    row.insertCell(2).innerText = u.knia;
    row.insertCell(3).innerText = u.rank;
    row.insertCell(4).innerText = u.xp;
    let actionsCell = row.insertCell(5);
    actionsCell.innerHTML = `<button onclick='deletePolice(${i})'>حذف</button>`;
  });
}

function deletePolice(i){
  policeUsers.splice(i,1);
  localStorage.setItem('policeUsers', JSON.stringify(policeUsers));
  renderPoliceUsers();
}

// إدارة الحسابات
function suspendUser(){ alert('تم تنفيذ وظيفة الإيقاف المؤقت'); }
function banUser(){ alert('تم تنفيذ وظيفة الحظر'); }
function addXP(){ 
  let u = document.getElementById('manage-user').value;
  let xp = parseInt(document.getElementById('add-xp').value);
  let user = policeUsers.find(x=>x.username===u);
  if(user){
    user.xp += xp;
    localStorage.setItem('policeUsers', JSON.stringify(policeUsers));
    renderPoliceUsers();
    alert(`تمت إضافة ${xp} نقطة خبرة للمستخدم ${u}`);
  } else alert('المستخدم غير موجود');
}

// عرض أولي
renderPersons();
renderPoliceUsers();
</script>
</body>
</html>
